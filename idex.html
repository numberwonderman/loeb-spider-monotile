<!DOCTYPE html>
<html>
<body style="background: #111; color: #fb1; margin: 0; overflow: hidden;">
    <canvas id="spiderCanvas"></canvas>
    <div style="position: absolute; top: 10px; left: 10px; font-family: monospace; pointer-events: none;">
        <h2>LOEB SPIDER-MONOTILE</h2>
        <p>Aperiodic Substitution Experiment</p>
    </div>

<script>
const canvas = document.getElementById('spiderCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// --- EXPERIMENT PARAMETERS ---
const MAX_DEPTH = 5;
const LEG_COUNT = 6;
const SCALE_FACTOR = 0.52; // Slightly larger to close the "lacunae"
const ROTATION = 0.5;     // The spiral "twist"
const JOINT_BEND = 0.8;    // The "hook" that fills the holes
const SEGMENT_RATIO = 0.5; // Knee position
// -----------------------------

function drawSpider(x, y, size, angle, depth) {
    if (depth <= 0) return;

    ctx.beginPath();
    ctx.strokeStyle = `hsl(${depth * 45}, 80%, 60%)`;
    ctx.lineWidth = depth;
    
    for (let i = 0; i < LEG_COUNT; i++) {
        let legAngle = angle + (i * (Math.PI * 2) / LEG_COUNT);
        
        // 1. Joint (The "Knee")
        let kX = x + Math.cos(legAngle) * (size * SEGMENT_RATIO);
        let kY = y + Math.sin(legAngle) * (size * SEGMENT_RATIO);
        
        // 2. Foot (The "Hook")
        let footAngle = legAngle + JOINT_BEND;
        let fX = kX + Math.cos(footAngle) * (size * (1 - SEGMENT_RATIO));
        let fY = kY + Math.sin(footAngle) * (size * (1 - SEGMENT_RATIO));

        ctx.moveTo(x, y);
        ctx.lineTo(kX, kY); 
        ctx.lineTo(fX, fY);
        
        // Recurse: Each foot becomes the center of a new, smaller spider
        drawSpider(fX, fY, size * SCALE_FACTOR, footAngle + ROTATION, depth - 1);
    }
    ctx.stroke();
}

ctx.translate(canvas.width / 2, canvas.height / 2);
drawSpider(0, 0, 160, 0, MAX_DEPTH);
</script>
</body>
</html>
